openapi: 3.0.1
info:
  title: WebRobot ETL API
  description: |
    API for managing projects, jobs, datasets, and ETL pipelines on WebRobot.
    
    ## Authentication
    
    The API uses API Keys for authentication. Include the `X-API-Key` header in all requests.
    
    ## Base URL
    
    - Production: `https://api.webrobot.eu/api`
    - Development: `http://localhost:8020/api`
    
    ## Rate Limiting
    
    Requests are limited to 1000 requests per minute per API key.
  version: 1.0.0
  contact:
    name: WebRobot Support
    email: support@webrobot.eu
  license:
    name: Proprietary
    url: https://webrobot.eu

servers:
  - url: https://api.webrobot.eu/api
    description: Production
  - url: http://localhost:8020/api
    description: Local development

security:
  - ApiKeyAuth: []

paths:
  /webrobot/cloud/scheduler/cronjobs:
    get:
      tags:
        - Cloud
        - Scheduler
      summary: List all Kubernetes CronJobs
      description: |
        Returns the list of all CronJobs configured in the Kubernetes cluster.
        
        CronJobs are used to schedule periodic execution of Spark jobs.
      operationId: listCronJobs
      parameters:
      - name: namespace
        in: query
        description: Kubernetes namespace to filter (optional)
        schema:
          type: string
          example: "webrobot"
      responses:
        '200':
          description: List of CronJobs retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Cloud
        - Scheduler
      summary: Create a new Kubernetes CronJob
      description: |
        Creates a new Kubernetes CronJob to schedule periodic execution of a Spark job.
        
        The CronJob will execute the job according to the specified schedule (cron format).
      operationId: createCronJob
      requestBody:
        required: true
        description: Configuration of the CronJob to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CronJobRequest'
      responses:
        '201':
          description: CronJob created successfully
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/cloud/scheduler/cronjobs/{name}:
    get:
      tags:
        - Cloud
        - Scheduler
      summary: Get a specific CronJob
      description: |
        Returns the details of a specific Kubernetes CronJob.
      operationId: getCronJob
      parameters:
      - name: name
        in: path
        required: true
        description: CronJob name
        schema:
          type: string
          example: "daily-etl-job"
      - name: namespace
        in: query
        description: Kubernetes namespace (optional)
        schema:
          type: string
          example: "webrobot"
      responses:
        '200':
          description: CronJob details
          content:
            application/json:
              schema:
                type: object
        '404':
          description: CronJob not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Cloud
        - Scheduler
      summary: Delete a Kubernetes CronJob
      description: |
        Deletes a Kubernetes CronJob and all its scheduled executions.
        
        **Warning:** This operation is irreversible.
      operationId: deleteCronJob
      parameters:
      - name: name
        in: path
        required: true
        description: Name of the CronJob to delete
        schema:
          type: string
          example: "daily-etl-job"
      - name: namespace
        in: query
        description: Kubernetes namespace (optional)
        schema:
          type: string
          example: "webrobot"
      responses:
        '200':
          description: CronJob deleted successfully
          content:
            application/json:
              schema:
                type: object
        '404':
          description: CronJob not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/cloud/spark/capabilities:
    get:
      tags:
        - Cloud
        - Spark
      summary: Get Spark cluster capabilities
      description: |
        Returns information about available capabilities and configurations of the Spark cluster,
        including supported versions, available resources, and configurations.
      operationId: getCapabilities
      responses:
        '200':
          description: Spark cluster capabilities
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/cloud/spark/info:
    get:
      tags:
        - Cloud
        - Spark
      summary: Get Spark cluster information
      description: |
        Returns general information about the Spark cluster, including versions, configurations
        e status of the cluster.
      operationId: getInfo
      responses:
        '200':
          description: Spark cluster information
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/cloud/spark/health:
    get:
      tags:
        - Cloud
        - Spark
        - Health
      summary: Spark service health check
      description: |
        Checks the health status of the Spark service and cluster.
      operationId: healthCheck
      responses:
        '200':
          description: Spark service operational
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "UP"
        '503':
          description: Spark service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/cloud/training/info:
    get:
      tags:
        - Cloud
        - Training
      summary: Get training service information
      description: |
        Returns information about the AI/ML training service, including versions and configurations.
      operationId: getInfo_1
      responses:
        '200':
          description: Training service information
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/cloud/training/health:
    get:
      tags:
        - Cloud
        - Training
        - Health
      summary: Training service health check
      description: |
        Checks the health status of the AI/ML training service.
      operationId: healthCheck_1
      responses:
        '200':
          description: Training service operational
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "UP"
        '503':
          description: Training service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ean-image-sourcing/{country}/execute:
    post:
      operationId: executeJob
      parameters:
      - name: country
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        default:
          description: default response
          content:
            application/json: {}
  /webrobot/api/ean-image-sourcing/bootstrap/status:
    get:
      operationId: getBootstrapStatus
      responses:
        default:
          description: default response
          content:
            application/json: {}
  /webrobot/api/ean-image-sourcing/{country}/images:
    post:
      tags:
        - EAN Plugin
        - Images
      summary: Search and retrieve images for EAN products
      description: |
        Searches for images of products identified by EAN codes in the dataset of the specified country.
        
        Returns images with:
        - Full image URL
        - Base64 data (if requested)
        - Similarity schours (0.0 - 1.0)
        - Additional metadata
        
        **Note:**
        - Images are searched in the most recent available dataset
        - Results are sorted by descending score
        - The `includeBase64` field in the request controls whether to include base64 data
      operationId: getImagesSimplified
      parameters:
      - name: country
        in: path
        required: true
        description: ISO country code (e.g. "denmark", "italy", "france")
        schema:
          type: string
          example: "denmark"
      requestBody:
        required: true
        description: |
          Image search request for EAN products.
          
          Specifies the EAN codes of products to search images for.
        content:
          application/json:
            schema:
              type: object
              required:
                - eans
              properties:
                eans:
                  type: array
                  items:
                    type: string
                  description: List of EAN codes to search
                  example: ["5901234123457", "5901234123458"]
                includeBase64:
                  type: boolean
                  description: If true, includes base64 data of images
                  default: false
                  example: true
                limit:
                  type: integer
                  description: Maximum number of images per product
                  default: 5
                  example: 10
            examples:
              basic:
                summary: Basic search without base64
                value:
                  eans: ["5901234123457"]
              withBase64:
                summary: Search with base64 data
                value:
                  eans: ["5901234123457", "5901234123458"]
                  includeBase64: true
                  limit: 10
      responses:
        '200':
          description: Images found successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        ean:
                          type: string
                          description: Product EAN code
                          example: "5901234123457"
                        images:
                          type: array
                          items:
                            type: object
                            properties:
                              url:
                                type: string
                                description: Full image URL
                                example: "https://example.com/image.jpg"
                              base64:
                                type: string
                                nullable: true
                                description: Base64 data of the image (if requested)
                              schours:
                                type: number
                                format: float
                                description: Similarity schours (0.0 - 1.0)
                                example: 0.85
                              source:
                                type: string
                                description: Image source
                                example: "google_images"
        '400':
          description: Invalid request - empty EAN list or invalid format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Dataset not found for the specified country
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ean-image-sourcing/info:
    get:
      operationId: getPluginInfo
      responses:
        default:
          -description: default response
          content:
            application/json: {}
  /webrobot/api/ean-image-sourcing/{country}/status:
    get:
      tags:
        - EAN Plugin
        - Jobs
      summary: Get status of the last EAN job executed for a country
      description: |
        Returns information about the last EAN Image Sourcing job executed for the specified country.
        
        Includes execution details such as:
        - Job status (PENDING, RUNNING, COMPLETED, FAILED)
        - Start and end timestamps
        - Execution time
        - Spark UI URL (if available)
        - Number of executor pods
        - Error messages (if failed)
      operationId: getStatus
      parameters:
      - name: country
        in: path
        required: true
        description: ISO country code (e.g. "denmark", "italy", "france")
        schema:
          type: string
          example: "denmark"
      responses:
        '200':
          description: Job status retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  country:
                    type: string
                    example: "denmark"
                  hasJobs:
                    type: boolean
                    description: Indicates if there are jobs for this country
                  latestJobStatus:
                    type: string
                    enum: [PENDING, RUNNING, COMPLETED, FAILED]
                    example: "COMPLETED"
                  latestJobId:
                    type: string
                    example: "210"
                  projectId:
                    type: string
                    example: "98"
                  latestExecution:
                    type: object
                    properties:
                      executionId:
                        type: string
                        example: "spark-2d53940045a6-95379617"
                      status:
                        type: string
                        example: "COMPLETED"
                      submittedAt:
                        type: string
                        format: date-time
                        example: "2025-12-10T19:36:47.798498"
                      completedAt:
                        type: string
                        format: date-time
                        example: "2025-12-10T19:58:04.825877"
                      executionTimeSeconds:
                        type: integer
                        description: Execution time in seconds
                        example: 1277
                      errorMessage:
                        type: string
                        nullable: true
                        description: Error message if the job failed
                      sparkUiUrl:
                        type: string
                        nullable: true
                        description: Spark UI URL to monitor the execution
                      executorPodCount:
                        type: integer
                        description: Number of executor pods used
                        example: 2
        '404':
          description: No job found for the specified country
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ean-image-sourcing/{country}/query:
    post:
      tags:
        - EAN Plugin
        - Query
      summary: Execute a query on the EAN dataset
      description: |
        Executes a custom query on the EAN dataset of the specified country.
        
        Allows querying the dataset with custom filters and conditions.
      operationId: queryImages
      parameters:
      - name: country
        in: path
        required: true
        description: ISO country code (e.g. "denmark", "italy", "france")
        schema:
          type: string
          example: "denmark"
      requestBody:
        required: true
        description: Query to execute on the dataset
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        '200':
          description: Query results
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Query non valida
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Dataset not found for the specified country
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ean-image-sourcing/{country}/schedule:
    post:
      tags:
        - EAN Plugin
        - Scheduler
      summary: Schedule a recurring EAN job
      description: |
        Creates or updates the schedule for a recurring EAN Image Sourcing job for a country.
        
        The job will be executed automatically according to the specified schedule (cron format).
      operationId: scheduleJob
      parameters:
      - name: country
        in: path
        required: true
        description: ISO country code (e.g. "denmark", "italy", "france")
        schema:
          type: string
          example: "denmark"
      requestBody:
        required: true
        description: Schedule configuration (cron format)
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        '200':
          description: Schedule created/updated successfully
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Schedule non valida
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ean-image-sourcing/{country}/upload:
    post:
      tags:
        - EAN Plugin
        - Upload
      summary: Upload an EAN dataset
      description: |
        Uploads a new EAN dataset for the specified country.
        
        The file must be in CSV format with EAN codes and related data.
      operationId: uploadCsv
      parameters:
      - name: country
        in: path
        required: true
        description: ISO country code (e.g. "denmark", "italy", "france")
        schema:
          type: string
          example: "denmark"
      requestBody:
        required: true
        description: CSV file to upload
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FormDataMultiPart'
      responses:
        '200':
          description: Dataset uploaded successfully
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Invalid file or wrong format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/training/{jobId}:
    delete:
      tags:
        - AI Providers
        - Training
      summary: Cancel an AI training job
      description: |
        Cancels an AI training job that is running or queued for the specified provider.
        
        **Warning:** This operation is irreversible and interrupts training if in progress.
      operationId: cancelTraining
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name (e.g. "huggingface", "openai", "cohere")
        schema:
          type: string
          example: "huggingface"
      - name: jobId
        in: path
        required: true
        description: ID of the training job to cancel
        schema:
          type: string
          example: "job-12345"
      responses:
        '200':
          description: Job cancelled successfully
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Job not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/training/{jobId}/download:
    get:
      tags:
        - AI Providers
        - Training
      summary: Download a trained model
      description: |
        Downloads a trained AI model from the specified provider.
        
        The model is downloaded to the specified path or the default path.
      operationId: downloadModel
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name
        schema:
          type: string
          example: "huggingface"
      - name: jobId
        in: path
        required: true
        description: Training job ID
        schema:
          type: string
          example: "job-12345"
      - name: outputPath
        in: query
        description: Destination path for download (optional)
        schema:
          type: string
          example: "/path/to/models"
      responses:
        '200':
          description: Model downloaded successfully
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Model or job not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/cost-estimate:
    post:
      tags:
        - AI Providers
        - Training
      summary: Estimate the cost of a training job
      description: |
        Calculates a cost estimate for an AI training job based on the specified parameters.
        
        The estimate includes compute, storage and other necessary service costs.
      operationId: estimateCost
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name
        schema:
          type: string
          example: "huggingface"
      requestBody:
        required: true
        description: Training job parameters for estimation
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TrainingRequestBean'
      responses:
        '200':
          description: Calculated cost estimate
          content:
            application/json:
              schema:
                type: object
                properties:
                  estimatedCost:
                    type: number
                    format: float
                    description: Costo stimato in USD
                  currency:
                    type: string
                    example: "USD"
        '400':
          description: Parametri non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/models:
    get:
      tags:
        - AI Providers
        - Models
      summary: Get models supported by a provider
      description: |
        Returns the list of all AI models supported by the specified provider,
        including information on versions, capabilities and requirements.
      operationId: getSupportedModels
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name
        schema:
          type: string
          example: "huggingface"
      responses:
        '200':
          description: Lista dei modelli supportati
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '404':
          description: Provider non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers:
    get:
      tags:
        - AI Providers
      summary: Get list of supported AI providers
      description: |
        Returns the list of all AI providers supported by the platform,
        including information on available capabilities and configurations.
      operationId: getSupportedProviders
      responses:
        '200':
          description: Lista dei provider supportati
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/training/{jobId}/logs:
    get:
      tags:
        - AI Providers
        - Training
      summary: Get logs of a training job
      description: |
        Returns the logs di esecuzione of a job di training AI.
        
        The logs include informazioni su progresso, errori e metriche of training.
      operationId: getTrainingLogs
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name
        schema:
          type: string
          example: "huggingface"
      - name: jobId
        in: path
        required: true
        description: Training job ID
        schema:
          type: string
          example: "job-12345"
      responses:
        '200':
          description: Log del job di training
          content:
            application/json:
              schema:
                type: object
                properties:
                  logs:
                    type: array
                    items:
                      type: string
        '404':
          description: Job not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/training/{jobId}/status:
    get:
      tags:
        - AI Providers
        - Training
      summary: Get status of a training job
      description: |
        Returns the current status of an AI training job, including information on
        progresso, durata e eventuali errori.
      operationId: getTrainingStatus
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name
        schema:
          type: string
          example: "huggingface"
      - name: jobId
        in: path
        required: true
        description: Training job ID
        schema:
          type: string
          example: "job-12345"
      responses:
        '200':
          description: Status del job di training
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [PENDING, RUNNING, COMPLETED, FAILED]
                  progress:
                    type: number
                    format: float
                    description: Percentuale di completamento (0-100)
        '404':
          description: Job not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/huggingface/models/publish:
    post:
      tags:
        - AI Providers
        - Models
      summary: Publish a model to Hugging Face
      description: |
        Publishes a trained model to the Hugging Face Model Hub platform.
        
        The model must have been trained and must be available for publication.
      operationId: publishModel
      requestBody:
        required: true
        description: Information for model publication
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModelPublishRequest'
      responses:
        '200':
          description: Model published successfully
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/training:
    post:
      tags:
        - AI Providers
        - Training
      summary: Start a new AI training job
      description: |
        Starts a new job di training for a model AI utilizzando il provider specified.
        
        The job is executed in the background and can be monithoursd through the status and logs endpoints.
      operationId: startTraining
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name
        schema:
          type: string
          example: "huggingface"
      requestBody:
        required: true
        description: Training job configuration
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TrainingRequestBean'
      responses:
        '201':
          description: Training job started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  jobId:
                    type: string
                    description: Created training job ID
        '400':
          description: Invalid configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/ai-providers/providers/{provider}/datasets:
    post:
      tags:
        - AI Providers
        - Datasets
      summary: Upload a dataset for AI training
      description: |
        Carica un dataset da utilizzare for the training di modelli AI on the provider specified.
        
        The dataset must be in a format supported by the provider.
      operationId: uploadDataset
      parameters:
      - name: provider
        in: path
        required: true
        description: AI provider name
        schema:
          type: string
          example: "huggingface"
      requestBody:
        required: true
        description: Information on the dataset to upload
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetUploadRequest'
      responses:
        '201':
          description: Dataset uploaded successfully
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Dataset non valido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/agents:
    post:
      tags:
        - Agents
      summary: Create a new PySpark agent
      description: |
        Creates a new PySpark agent that can be used to execute ETL jobs.
        
        An agent contains the PySpark code that is executed when a job is started.
        The agent must be associated with a category.
      operationId: createAgent
      requestBody:
        required: true
        description: Agent data to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentDto'
      responses:
        '201':
          description: Agent created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `agents:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/agents/{agentId}:
    delete:
      tags:
        - Agents
      summary: Delete an agent
      description: |
        Deletes a PySpark agent from the system.
        
        **Warning:** This operation is irreversible. Jobs that use this agent
        will no longer be able to be executed.
      operationId: deleteAgent
      parameters:
      - name: agentId
        in: path
        required: true
        description: Unique ID of the agent to delete
        schema:
          type: string
          example: "123"
      responses:
        '200':
          description: Agente eliminato con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Agente non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `agents:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/agents/{categoryId}/{agentId}:
    get:
      tags:
        - Agents
      summary: Get a specific agent
      description: |
        Returns the details of a specific PySpark agent, including the source code.
      operationId: getAgent
      parameters:
      - name: categoryId
        in: path
        required: true
        description: ID delthe category a cui appartiene the agent
        schema:
          type: string
          example: "1"
      - name: agentId
        in: path
        required: true
        description: Unique ID delthe agent
        schema:
          type: string
          example: "123"
      responses:
        '200':
          description: Dettagli delthe agent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentDto'
        '404':
          description: Agente non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `agents:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Agents
      summary: Update an agent
      description: |
        Updates the data of an existing PySpark agent, including the source code.
        
        **Note:** L'aggiornamento del codice sorgente richiede che nessun job sia running
        with this agent.
      operationId: updateAgent
      parameters:
      - name: categoryId
        in: path
        required: true
        description: ID delthe category a cui appartiene the agent
        schema:
          type: string
          example: "1"
      - name: agentId
        in: path
        required: true
        description: Unique ID of the agent to update
        schema:
          type: string
          example: "123"
      requestBody:
        required: true
        description: Updated agent data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgentDto'
      responses:
        '200':
          description: Agent updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Agente non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `agents:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Agente in uso - impossibile aggiornare
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/agents/{categoryId}/name/{agentName}:
    get:
      tags:
        - Agents
      summary: Get an agent by name
      description: |
        Returns the details of a PySpark agent searching by name within of a category.
      operationId: getAgentFromName
      parameters:
      - name: categoryId
        in: path
        required: true
        description: ID delthe category
        schema:
          type: string
          example: "1"
      - name: agentName
        in: path
        required: true
        description: Agent name
        schema:
          type: string
          example: "my-agent"
      responses:
        '200':
          description: Dettagli delthe agent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgentDto'
        '404':
          description: Agente non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `agents:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/agents/{categoryId}:
    get:
      tags:
        - Agents
      summary: Get all agents of a category
      description: |
        Returns the list of all PySpark agents belonging to a specific category.
      operationId: getAllAgents
      parameters:
      - name: categoryId
        in: path
        required: true
        description: ID delthe category
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Lista dethe agents delthe category
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AgentDto'
        '404':
          description: Categoria non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `agents:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/categories:
    get:
      tags:
        - Categories
      summary: Get all categories
      description: |
        Returns the list of all categories available in the system.
        
        Le categorie sono utilizzate to organize progetti, agenti e job.
      operationId: getAllCategories
      responses:
        '200':
          description: Lista delle categorie
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobCategoryDto'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Categories
      summary: Create a new category
      description: |
        Creates a new category to organize projects, agents and jobs.
      operationId: createCategory
      requestBody:
        required: true
        description: Category data to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobCategoryDto'
      responses:
        '201':
          description: Category created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobCategoryDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/categories/id/{categoryId}:
    get:
      tags:
        - Categories
      summary: Get a specific category
      description: |
        Returns the details of a category specifica, including l'elenco dethe projects associati.
      operationId: getCategory
      parameters:
      - name: categoryId
        in: path
        required: true
        description: Unique ID delthe category
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Dettagli delthe category
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobCategoryDto'
        '404':
          description: Categoria non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Categories
      summary: Update a category
      description: |
        Updates the data of an existing category.
      operationId: updateCategory
      parameters:
      - name: categoryId
        in: path
        required: true
        description: Unique ID of the category to update
        schema:
          type: string
          example: "1"
      requestBody:
        required: true
        description: Dati aggiornati delthe category
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobCategoryDto'
      responses:
        '200':
          description: Category updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobCategoryDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Categoria non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Categories
      summary: Delete a category
      description: |
        Deletes a category from the system.
        
        **Attenzione:** Questa operazione Ã¨ irreversibile. I progetti associati non verranno eliminati.
      operationId: deleteCategory
      parameters:
      - name: categoryId
        in: path
        required: true
        description: Unique ID of the category to delete
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Categoria eliminata con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Categoria non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/categories/{categoryName}:
    get:
      tags:
        - Categories
      summary: Get a category by name
      description: |
        Returns the details of a category searching by name.
      operationId: getCategoryFromName
      parameters:
      - name: categoryName
        in: path
        required: true
        description: Category name
        schema:
          type: string
          example: "my-category"
      responses:
        '200':
          description: Dettagli delthe category
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobCategoryDto'
        '404':
          description: Categoria non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/categories/test:
    get:
      tags:
        - Categories
        - Test
      summary: Test endpoint for categories
      description: |
        Endpoint di test per verificare la funzionalitÃ  of the categorie.
      operationId: test
      responses:
        '200':
          description: Test completato con successo
          content:
            application/json:
              schema:
                type: object
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/cloud-credentials:
    get:
      tags:
        - Cloud Credentials
      summary: Get all cloud credentials
      description: |
        Returns the list of all cloud credentials configured in the system,
        con supporto per paginazione e filtri per provider.
        
        Le credenziali cloud vengono utilizzate to access servizi esterni come
        AWS, Azure, GCP, ecc. durante l'esecuzione dthe jobs Spark.
      operationId: getAllCloudCredentials
      parameters:
      - name: provider
        in: query
        description: Filter by provider cloud (es. "aws", "azure", "gcp")
        schema:
          type: string
          example: "aws"
      - name: page
        in: query
        description: Numero di pagina (0-based)
        schema:
          type: integer
          format: int32
          default: 0
          example: 0
      - name: pageSize
        in: query
        description: Dimensione della pagina
        schema:
          type: integer
          format: int32
          default: 50
          example: 50
      responses:
        '200':
          description: Lista delthe credentials cloud
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CloudCredential'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Cloud Credentials
      summary: Create a new cloud credential
      description: |
        Creates a new cloud credential to access external cloud services.
        
        Le credenziali vengono criptate e memorizzate in modo sicuro nel database.
      operationId: createCloudCredential
      requestBody:
        required: true
        description: Cloud credential data to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CloudCredential'
      responses:
        '201':
          description: Credential created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CloudCredential'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/cloud-credentials/id/{credentialId}:
    get:
      tags:
        - Cloud Credentials
      summary: Get a specific cloud credential
      description: |
        Returns the details of a specific cloud credential.
        
        **Nota:** Le credenziali sensibili vengono restituite in forma criptata.
      operationId: getCloudCredentialById
      parameters:
      - name: credentialId
        in: path
        required: true
        description: Unique ID della credenziale
        schema:
          type: string
          example: "550e8400-e29b-41d4-a716-446655440000"
      responses:
        '200':
          description: Dettagli della credenziale
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CloudCredential'
        '404':
          description: Credenziale non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Cloud Credentials
      summary: Update a cloud credential
      description: |
        Updates the data of an existing cloud credential.
        
        Le nuove credenziali vengono criptate prima di essere salvate.
      operationId: updateCloudCredential
      parameters:
      - name: credentialId
        in: path
        required: true
        description: Unique ID of the credential to update
        schema:
          type: string
          example: "550e8400-e29b-41d4-a716-446655440000"
      requestBody:
        required: true
        description: Dati aggiornati della credenziale
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CloudCredential'
      responses:
        '200':
          description: Credential updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CloudCredential'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Credenziale non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Cloud Credentials
      summary: Delete una credenziale cloud
      description: |
        Deletes a cloud credential from the system.
        
        **Attenzione:** Questa operazione Ã¨ irreversibile. I job che utilizzano questa
        credenziale non potranno piÃ¹ accedere ai servizi cloud.
      operationId: deleteCloudCredential
      parameters:
      - name: credentialId
        in: path
        required: true
        description: Unique ID of the credential to delete
        schema:
          type: string
          example: "550e8400-e29b-41d4-a716-446655440000"
      responses:
        '200':
          description: Credenziale eliminata con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Credenziale non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/cloud-credentials/provider/{provider}:
    get:
      tags:
        - Cloud Credentials
      summary: Get the credentials cloud per provider
      description: |
        Returns the list of all cloud credentials configured for a specific provider.
      operationId: getCloudCredentialsByProvider
      parameters:
      - name: provider
        in: path
        required: true
        description: Provider name cloud (es. "aws", "azure", "gcp")
        schema:
          type: string
          example: "aws"
      responses:
        '200':
          description: Lista delthe credentials for the provider
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CloudCredential'
        '404':
          description: Provider non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/datasets:
    get:
      tags:
        - Datasets
      summary: Get all datasets
      description: |
        Returns the list of all datasets available in the system, with support for filters.
        
        Datasets can be filtered by type, format and status di indicizzazione.
      operationId: getAllDatasets_1
      parameters:
      - name: type
        in: query
        description: Filter by dataset type
        schema:
          type: string
          example: "parquet"
      - name: indexed
        in: query
        description: Filter by status di indicizzazione (true/false)
        schema:
          type: string
          example: "true"
      - name: format
        in: query
        description: Filter by format (parquet, csv, json, ecc.)
        schema:
          type: string
          example: "parquet"
      responses:
        '200':
          description: Lista dei dataset
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DatasetDto'
        '401':
          description: Non autorizzato - scope `datasets:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Datasets
      summary: Create a new dataset
      description: |
        Creates a new dataset in the system with the specified configurations.
        
        The dataset can be associated with un progetto e utilizzato come input o output per job ETL.
      operationId: createDataset
      requestBody:
        required: true
        description: Dataset data to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetDto'
      responses:
        '201':
          description: Dataset created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `datasets:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/datasets/{datasetId}:
    get:
      tags:
        - Datasets
      summary: Get un dataset specifico
      description: |
        Returns the details of a specific dataset, including information on schema, format and path.
      operationId: getDataset_1
      parameters:
      - name: datasetId
        in: path
        required: true
        description: Unique ID del dataset
        schema:
          type: string
          example: "123"
      responses:
        '200':
          description: Dettagli del dataset
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetDto'
        '404':
          description: Dataset non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `datasets:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Datasets
      summary: Update un dataset
      description: |
        Updates the data of an existing dataset, including configurations and metadata.
      operationId: updateDataset
      parameters:
      - name: datasetId
        in: path
        required: true
        description: Unique ID of the dataset to update
        schema:
          type: string
          example: "123"
      requestBody:
        required: true
        description: Dati aggiornati del dataset
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DatasetDto'
      responses:
        '200':
          description: Dataset updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DatasetDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Dataset non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `datasets:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Datasets
      summary: Delete un dataset
      description: |
        Deletes a dataset from the system.
        
        **Attenzione:** Questa operazione Ã¨ irreversibile. I job che utilizzano questo dataset
        come input o output potrebbero non funzionare correttamente.
      operationId: deleteDataset_1
      parameters:
      - name: datasetId
        in: path
        required: true
        description: Unique ID of the dataset to delete
        schema:
          type: string
          example: "123"
      responses:
        '200':
          description: Dataset eliminato con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Dataset non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `datasets:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/datasets/query:
    post:
      tags:
        - Datasets
        - Query
      summary: Executes a query SQL su un dataset
      description: |
        Executes a query SQL (Presto/Trino) su un dataset per recuperare o analizzare the data.
        
        The query is executed on the MinIO catalog and can use all SQL features supported by Trino.
      operationId: executeQuery
      requestBody:
        required: true
        description: Query SQL da eseguire
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrestoQueryRequest'
      responses:
        '200':
          description: Query results
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
        '400':
          description: Query non valida
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/datasets/query/task/{taskId}/info:
    get:
      tags:
        - Datasets
        - Query
        - Tasks
      summary: Get information about the dataset associated with a task
      description: |
        Returns information about the output dataset associated with a specific task.
      operationId: getDatasetInfoByTask
      parameters:
      - name: taskId
        in: path
        required: true
        description: Unique ID del task
        schema:
          type: string
          example: "123"
      responses:
        '200':
          description: Dataset information
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Task o dataset non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/datasets/query/columns:
    get:
      tags:
        - Datasets
        - Query
      summary: Get columns of a table
      description: |
        Returns the list of columns and their types of a table in the Trino catalog.
      operationId: getTableColumns
      parameters:
      - name: catalog
        in: query
        description: "Catalog name (default: minio)"
        schema:
          type: string
          default: minio
          example: "minio"
      - name: schema
        in: query
        description: "Schema name (default: default)"
        schema:
          type: string
          default: default
          example: "default"
      - name: table
        in: query
        required: true
        description: Table name
        schema:
          type: string
          example: "my_table"
      responses:
        '200':
          description: Lista delle colonne
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    name:
                      type: string
                    type:
                      type: string
        '404':
          description: Tabella non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/datasets/query/tables:
    get:
      tags:
        - Datasets
        - Query
      summary: List all available tables
      description: |
        Returns the list of all tables available in a specific catalog and schema.
      operationId: listTables
      parameters:
      - name: catalog
        in: query
        description: "Catalog name (default: minio)"
        schema:
          type: string
          default: minio
          example: "minio"
      - name: schema
        in: query
        description: "Schema name (default: default)"
        schema:
          type: string
          default: default
          example: "default"
      responses:
        '200':
          description: Lista delle tabelle
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/datasets/query/task/{taskId}:
    post:
      tags:
        - Datasets
        - Query
        - Tasks
      summary: Executes an SQL query on the output dataset of a task
      description: |
        Executes a SQL query on the output dataset associated with a specific task.
        
        Useful for analyzing the results of a task after its execution.
      operationId: queryDatasetByTask
      parameters:
      - name: taskId
        in: path
        required: true
        description: Unique ID del task
        schema:
          type: string
          example: "123"
      requestBody:
        required: true
        description: Query SQL da eseguire
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrestoQueryRequest'
      responses:
        '200':
          description: Query results
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
        '400':
          description: Query non valida
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Task o dataset non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/etl-library-versions:
    get:
      tags:
        - Admin
        - ETL Library
      summary: Get all ETL library versions
      description: |
        Returns the list of all ETL library versions available in the system,
        con supporto per filtri by build type and status attivo.
      operationId: getAllVersions
      parameters:
      - name: buildType
        in: query
        description: Filter by build type (es. "development", "production")
        schema:
          type: string
          example: "development"
      - name: activeOnly
        in: query
        description: Restituisce solo le versioni attive
        schema:
          type: boolean
          default: false
      responses:
        '200':
          description: Lista delle versioni ETL
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/EtlLibraryVersionApiDto'
        '401':
          description: Non autorizzato - scope `admin:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Admin
        - ETL Library
      summary: Create or update an ETL library version
      description: |
        Creates a new versione of the libreria ETL o aggiorna una versione esistente.
        
        Le versioni ETL vengono utilizzate per eseguire job Spark con versioni specifiche della libreria.
      operationId: createOrUpdateVersion
      requestBody:
        required: true
        description: ETL version data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EtlLibraryVersionApiDto'
      responses:
        '200':
          description: Version created or updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EtlLibraryVersionApiDto'
        '201':
          description: Version created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EtlLibraryVersionApiDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/etl-library-versions/id/{id}:
    get:
      tags:
        - Admin
        - ETL Library
      summary: Get una versione ETL specifica
      description: |
        Returns the details of a version of the library ETL identified by the ID.
      operationId: getVersionById
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID della versione
        schema:
          type: integer
          format: int64
          example: 1
      responses:
        '200':
          description: Dettagli della versione ETL
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EtlLibraryVersionApiDto'
        '404':
          description: Versione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Admin
        - ETL Library
      summary: Update una versione ETL
      description: |
        Aggiorna the data of a version of the library ETL esistente.
      operationId: updateVersion
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID of the version to update
        schema:
          type: integer
          format: int64
          example: 1
      requestBody:
        required: true
        description: Dati aggiornati della versione
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EtlLibraryVersionApiDto'
      responses:
        '200':
          description: Versione aggiornata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EtlLibraryVersionApiDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Versione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Admin
        - ETL Library
      summary: Delete una versione ETL
      description: |
        Deletes an ETL library version from the system.
        
        **Attenzione:** Questa operazione Ã¨ irreversibile. I job che utilizzano questa versione
        potrebbero non funzionare correttamente.
      operationId: deleteVersion
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID of the version to delete
        schema:
          type: integer
          format: int64
          example: 1
      responses:
        '200':
          description: Versione eliminata con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Versione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/etl-library-versions/build-type/{buildType}/build-number/{buildNumber}:
    get:
      tags:
        - Admin
        - ETL Library
      summary: Get una versione ETL per tipo e numero di build
      description: |
        Returns the details of a version of the library ETL identified by build type
        e numero di build.
      operationId: getVersionByBuildTypeAndBuildNumber
      parameters:
      - name: buildType
        in: path
        required: true
        description: Tipo di build (es. "development", "production")
        schema:
          type: string
          example: "development"
      - name: buildNumber
        in: path
        required: true
        description: Numero di build
        schema:
          type: integer
          format: int32
          example: 123
      responses:
        '200':
          description: Dettagli della versione ETL
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EtlLibraryVersionApiDto'
        '404':
          description: Versione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/package/download:
    get:
      tags:
        - Package
      summary: Get URL for package download
      description: |
        Returns un URL temporaneo per scaricare un package dthe projects e configurazioni.
      operationId: getUrlDownload
      responses:
        '200':
          description: URL di download
          content:
            application/json:
              schema:
                type: object
                properties:
                  url:
                    type: string
                    format: uri
                    description: Temporary URL for download
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/package/upload:
    get:
      tags:
        - Package
      summary: Get URL for package upload
      description: |
        Returns un URL temporaneo per caricare un package dthe projects e configurazioni.
      operationId: getUrlUpload
      responses:
        '200':
          description: URL di upload
          content:
            application/json:
              schema:
                type: object
                properties:
                  url:
                    type: string
                    format: uri
                    description: Temporary URL for upload
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/package/export/all:
    get:
      tags:
        - Package
      summary: Start export of all projects
      description: |
        Starts the export process for all projects and system configurations
        in a compressed package.
      operationId: start_export_All
      responses:
        '200':
          description: Export started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  exportId:
                    type: string
                    description: ID dell'operazione di export
        '401':
          description: Non autorizzato - scope `package:export` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/package/export/id/{projectId}:
    get:
      tags:
        - Package
      summary: Start export of a specific project
      description: |
        Starts the export process for a specific project and its configurations
        in a compressed package.
      operationId: start_export_project
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto da esportare
        schema:
          type: string
          example: "98"
      responses:
        '200':
          description: Export started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  exportId:
                    type: string
                    description: ID dell'operazione di export
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `package:export` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/package/import/all:
    get:
      tags:
        - Package
      summary: Start import of all projects
      description: |
        Starts the import process of all projects and configurations from a compressed package.
        
        **Attenzione:** Questa operazione puÃ² sovrascrivere progetti esistenti.
      operationId: start_import_All
      responses:
        '200':
          description: Import started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  importId:
                    type: string
                    description: ID dell'operazione di import
        '401':
          description: Non autorizzato - scope `package:import` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/package/import/id/{projectId}:
    get:
      tags:
        - Package
      summary: Start import of a specific project
      description: |
        Starts the import process of a specific project and its configurations from a package compresso.
        
        **Attenzione:** Questa operazione puÃ² sovrascrivere il progetto esistente se presente.
      operationId: start_import_project
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto da importare
        schema:
          type: string
          example: "98"
      responses:
        '200':
          description: Import started successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  importId:
                    type: string
                    description: ID dell'operazione di import
        '404':
          description: Progetto non trovato nel package
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `package:import` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugins/{pluginId}/disable:
    post:
      tags:
        - Admin
        - Plugins
      summary: Disable a plugin
      description: |
        Disable a plugin in the system for a specific build type.
        
        I plugin disabilitati non will be available for l'uso nethe jobs.
      operationId: disablePlugin
      parameters:
      - name: pluginId
        in: path
        required: true
        description: Unique ID del plugin
        schema:
          type: string
          example: "ean-image-sourcing"
      - name: buildType
        in: query
        description: "Tipo di build (default: development)"
        schema:
          type: string
          default: development
          example: "development"
      responses:
        '200':
          description: Plugin disabilitato con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Plugin non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugins/{pluginId}/enable:
    post:
      tags:
        - Admin
        - Plugins
      summary: Enable a plugin
      description: |
        Enable a plugin in the system for a specific build type.
        
        I plugin abilitati will be available for l'uso nethe jobs.
      operationId: enablePlugin
      parameters:
      - name: pluginId
        in: path
        required: true
        description: Unique ID del plugin
        schema:
          type: string
          example: "ean-image-sourcing"
      - name: buildType
        in: query
        description: "Tipo di build (default: development)"
        schema:
          type: string
          default: development
          example: "development"
      responses:
        '200':
          description: Plugin abilitato con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Plugin non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugins:
    get:
      tags:
        - Admin
        - Plugins
      summary: List all plugins
      description: |
        Returns the list of all plugins available in the system, filtered by build type.
      operationId: listPlugins
      parameters:
      - name: buildType
        in: query
        description: "Tipo di build (default: development)"
        schema:
          type: string
          default: development
          example: "development"
      responses:
        '200':
          description: Lista dethe plugins
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '401':
          description: Non autorizzato - scope `admin:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugins/upload:
    post:
      tags:
        - Admin
        - Plugins
      summary: Upload a new plugin
      description: |
        Uploads a new plugin to the system as a JAR file.
        
        Il plugin can be associated with one or more organizations e to a specific build type.
      operationId: uploadPlugin
      requestBody:
        required: true
        description: File del plugin e metadati
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
                - pluginId
              properties:
                file:
                  $ref: '#/components/schemas/FormDataContentDisposition'
                  description: File JAR del plugin
                pluginId:
                  type: string
                  description: Unique ID del plugin
                  example: "my-plugin"
                buildType:
                  type: string
                  description: "Tipo di build (default: development)"
                  default: development
                  example: "development"
                buildNumber:
                  type: integer
                  format: int32
                  description: Numero di build del plugin
                  example: 1
                organizationIds:
                  type: string
                  description: Lista di ID organizzazioni separate da virgola
                  example: "1,2,3"
      responses:
        '201':
          description: Plugin caricato con successo
          content:
            application/json:
              schema:
                type: object
        '400':
          description: File o dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugin-installations/{id}:
    get:
      tags:
        - Admin
        - Plugins
      summary: Get un'installazione plugin specifica
      description: |
        Returns the details of a plugin installation identified by the ID.
      operationId: getInstallationById
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID dell'installazione
        schema:
          type: integer
          format: int64
          example: 1
      responses:
        '200':
          description: Dettagli dell'installazione plugin
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginInstallation'
        '404':
          description: Installazione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Admin
        - Plugins
      summary: Update un'installazione plugin
      description: |
        Aggiorna the data of an existing plugin installation, including configurations and metadata.
      operationId: updateInstallation
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID of the installation to update
        schema:
          type: integer
          format: int64
          example: 1
      requestBody:
        required: true
        description: Dati aggiornati dell'installazione
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PluginInstallation'
      responses:
        '200':
          description: Installazione aggiornata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginInstallation'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Installazione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Admin
        - Plugins
      summary: Delete un'installazione plugin
      description: |
        Deletes a plugin installation from the system.
        
        **Attenzione:** Questa operazione Ã¨ irreversibile. Il plugin non will be piÃ¹ disponibile
        per l'uso nethe jobs.
      operationId: deleteInstallation
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID of the installation to delete
        schema:
          type: integer
          format: int64
          example: 1
      responses:
        '200':
          description: Installazione eliminata con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Installazione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugin-installations/{id}/disable:
    post:
      tags:
        - Admin
        - Plugins
      summary: Disable a plugin installation
      description: |
        Disable a plugin installation in the system.
        
        I plugin disabilitati non will be available for l'uso nethe jobs.
      operationId: disablePlugin_1
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID dell'installazione
        schema:
          type: integer
          format: int64
          example: 1
      responses:
        '200':
          description: Installazione disabilitata con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Installazione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugin-installations/{id}/enable:
    post:
      tags:
        - Admin
        - Plugins
      summary: Enable a plugin installation
      description: |
        Enable a plugin installation in the system.
        
        I plugin abilitati will be available for l'uso nethe jobs.
      operationId: enablePlugin_1
      parameters:
      - name: id
        in: path
        required: true
        description: Unique ID dell'installazione
        schema:
          type: integer
          format: int64
          example: 1
      responses:
        '200':
          description: Installazione abilitata con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Installazione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugin-installations:
    get:
      tags:
        - Admin
        - Plugins
      summary: Get all plugin installations
      description: |
        Returns the list of all plugin installations available in the system,
        with support for filters by organizzazione e status abilitato.
      operationId: getAllInstallations
      parameters:
      - name: organizationId
        in: query
        description: Filter by ID organizzazione
        schema:
          type: string
          example: "1"
      - name: enabledOnly
        in: query
        description: Restituisce solo the installations abilitate
        schema:
          type: boolean
          default: false
      responses:
        '200':
          description: Lista delle installazionthe plugins
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PluginInstallation'
        '401':
          description: Non autorizzato - scope `admin:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Admin
        - Plugins
      summary: Register a new plugin
      description: |
        Register a new plugin in the system come installazione.
        
        Il plugin can be associated with one or more organizations.
      operationId: registerPlugin
      requestBody:
        required: true
        description: Plugin installation data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PluginInstallation'
      responses:
        '201':
          description: Plugin registrato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginInstallation'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/admin/plugin-installations/reload:
    post:
      tags:
        - Admin
        - Plugins
      summary: Reload all plugins
      description: |
        Reloads all plugins in the system, updating configurations and installations.
        
        Useful after uploading or modifying plugins to apply changes without restarting the system.
      operationId: reloadPlugins
      responses:
        '200':
          description: Plugin ricaricati con successo
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Plugins reloaded successfully"
        '401':
          description: Non autorizzato - scope `admin:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs:
    get:
      tags:
        - Projects
        - Jobs
      summary: Get all jobs of a project
      description: |
        Returns the list of all ETL jobs associated with a specific project.
      operationId: getProjectJobs
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      responses:
        '200':
          description: Lista dethe jobs del progetto
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobDto'
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Projects
        - Jobs
      summary: Add a job to a project
      description: |
        Creates a new job ETL e lo associa a un progetto esistente.
        
        The job must be associated with a Agent con codice PySpark valido.
      operationId: addJobToProject
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      requestBody:
        required: true
        description: Job data to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobDto'
      responses:
        '201':
          description: Job created and added to project successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects:
    get:
      tags:
        - Projects
      summary: Get all projects
      description: |
        Returns the list of all projects available in the system.
        
        I progetti sono utilizzati to organize job, task e dataset correlati.
      operationId: getAllProjects
      responses:
        '200':
          description: Lista dethe projects
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobProjectDto'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Projects
      summary: Create a new project
      description: |
        Creates a new progetto in the system.
        
        Un progetto puÃ² contenere piÃ¹ job ETL e can be schedulato per esecuzione automatica.
      operationId: createProject
      requestBody:
        required: true
        description: Project data to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobProjectDto'
      responses:
        '201':
          description: Project created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobProjectDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/tasks:
    get:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Get all tasks of a job
      description: |
        Returns the list of all tasks associated with a specific job.
        
        I task rappresentano le singole operazioni che compongono un job ETL.
      operationId: getAllTasks
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      responses:
        '200':
          description: Lista dethe tasks del job
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TaskDto'
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Create a new task in a job
      description: |
        Creates a new task e lo associa a un job esistente.
        
        Un task can be of type SPARK, AUTONOMOUS_AGENT o BACKGROUND_TASK.
      operationId: createTask
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      requestBody:
        required: true
        description: Task data to create
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskDto'
      responses:
        '201':
          description: Task created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}:
    get:
      tags:
        - Projects
      summary: Get un progetto specifico
      description: |
        Returns the details of a project specifico, including l'elenco dethe jobs associati.
      operationId: getProject
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      responses:
        '200':
          description: Dettagli del progetto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobProjectDto'
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Projects
      summary: Update un progetto
      description: |
        Aggiorna the data of a project esistente, including configurations and scheduling.
      operationId: updateProject
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID of the project to update
        schema:
          type: string
          example: "98"
      requestBody:
        required: true
        description: Dati aggiornati del progetto
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobProjectDto'
      responses:
        '200':
          description: Project updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobProjectDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Projects
      summary: Delete un progetto
      description: |
        Deletes a project from the system.
        
        **Warning:** This operation is irreversible. All associated jobs, tasks and data
        al progetto verranno eliminati.
      operationId: deleteProject
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID of the project to delete
        schema:
          type: string
          example: "98"
      responses:
        '200':
          description: Progetto eliminato con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/tasks/{taskId}:
    get:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Get un task specifico
      description: |
        Returns the details of a specific task, including configurations and execution status.
      operationId: getTask
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: taskId
        in: path
        required: true
        description: Unique ID del task
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Dettagli del task
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDto'
        '404':
          description: Progetto, job o task non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Update un task
      description: |
        Aggiorna the data of an existing task, including configurations and metadata.
      operationId: updateTask
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: taskId
        in: path
        required: true
        description: Unique ID of the task to update
        schema:
          type: string
          example: "1"
      requestBody:
        required: true
        description: Dati aggiornati del task
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskDto'
      responses:
        '200':
          description: Task aggiornato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto, job o task non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Delete un task
      description: |
        Elimina un task from a job.
        
        **Attenzione:** Questa operazione Ã¨ irreversibile. Il task verrÃ  rimosso dal job.
      operationId: deleteTask
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: taskId
        in: path
        required: true
        description: Unique ID of the task to delete
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Task eliminato con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Progetto, job o task non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/execute:
    post:
      tags:
        - Jobs
        - ETL Execution
      summary: Execute a Spark job immediately
      description: |
        Esegue un job Spark in modalitÃ  immediata, allocando risorse in the cluster Kubernetes.
        
        The job is executed with the configurations specified in the job itself or through
        parametri opzionali nella richiesta.
        
        **Note importanti:**
        - The job must be associated with a Agent con codice PySpark valido
        - Le credenziali cloud vengono iniettate automatically se configurate
        - Il webhook is called automatically all'inizio (RUNNING) e alla fine (COMPLETED/FAILED)
        
        **Rate Limiting:** Max 10 esecuzioni simultanee per progetto
      operationId: executeJob_1
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job da eseguire
        schema:
          type: string
          example: "210"
      requestBody:
        required: false
        description: |
          Parametri opzionali per l'esecuzione of the job.
          
          Se non specificati, vengono usati i valori di default del job.
        content:
          application/json:
            schema:
              type: object
              properties:
                cloudCredentialIds:
                  type: array
                  items:
                    type: string
                  description: Lista di ID credenziali cloud da utilizzare
                arguments:
                  type: array
                  items:
                    type: string
                  description: Argomenti aggiuntivi da passare al job Spark
            examples:
              default:
                summary: Execution with default parameters
                value: {}
              withCredentials:
                summary: Execution with specific cloud credentials
                value:
                  cloudCredentialIds:
                    - "550e8400-e29b-41d4-a716-446655440000"
      responses:
        '200':
          description: Job eseguito con successo
          content:
            application/json:
              schema:
                type: object
                properties:
                  executionId:
                    type: string
                    description: Unique ID dell'esecuzione Spark
                    example: "spark-2d53940045a6-95379617"
                  status:
                    type: string
                    description: Execution status
                    example: "SUBMITTED"
                  message:
                    type: string
                    description: Descriptive message
                    example: "Job execution submitted successfully"
                  clusterId:
                    type: string
                    description: ID del cluster utilizzato
                    example: "default-cluster"
                  success:
                    type: boolean
                    description: Indica se la submission Ã¨ avvenuta con successo
                    example: true
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - API key mancante o non valida
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Permessi insufficienti - scope `etl:execute` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Job giÃ  running
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/executions/{executionId}/logs:
    get:
      tags:
        - Projects
        - Jobs
        - Execution
      summary: Get logs of a job execution
      description: |
        Returns the logs di esecuzione of a job Spark specifico, con supporto per filtri
        by pod type (driver/executor) e limitation of the number of rows.
      operationId: getExecutionLogs
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: executionId
        in: path
        required: true
        description: Unique ID dell'esecuzione Spark
        schema:
          type: string
          example: "spark-2d53940045a6-95379617"
      - name: podType
        in: query
        description: Tipo di pod da cui recuperare i log (driver, executor, o tutti se non specificato)
        schema:
          type: string
          enum: [driver, executor]
          example: "driver"
      - name: tail
        in: query
        description: Numero di righe finali da recuperare (opzionale)
        schema:
          type: integer
          format: int32
          example: 100
      responses:
        '200':
          description: Log dell'esecuzione
          content:
            application/json:
              schema:
                type: object
                properties:
                  logs:
                    type: array
                    items:
                      type: string
        '404':
          description: Esecuzione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/executions/{executionId}/status:
    get:
      tags:
        - Projects
        - Jobs
        - Execution
      summary: Get status of a job execution
      description: |
        Returns lo status dettagliato of an execution job Spark, incluse informazioni su
        progresso, durata, metriche e eventuali errori.
        
        Lo status viene recuperato dal database e include dettagli come:
        - Execution status (PENDING, RUNNING, COMPLETED, FAILED)
        - Timestamp di inizio e fine
        - Tempo di esecuzione
        - URL Spark UI
        - Numero di executor pod
        - Messaggi di error (se fallito)
      operationId: getExecutionStatus
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: executionId
        in: path
        required: true
        description: Unique ID dell'esecuzione Spark
        schema:
          type: string
          example: "spark-2d53940045a6-95379617"
      responses:
        '200':
          description: Status dell'esecuzione
          content:
            application/json:
              schema:
                type: object
                properties:
                  executionId:
                    type: string
                    example: "spark-2d53940045a6-95379617"
                  status:
                    type: string
                    enum: [PENDING, RUNNING, COMPLETED, FAILED, UNKNOWN]
                    example: "COMPLETED"
                  startedAt:
                    type: string
                    format: date-time
                    nullable: true
                  completedAt:
                    type: string
                    format: date-time
                    nullable: true
                  executionTimeSeconds:
                    type: integer
                    nullable: true
                    description: Tempo di esecuzione in secondi
                  errorMessage:
                    type: string
                    nullable: true
                  sparkUiUrl:
                    type: string
                    nullable: true
                  executorPodCount:
                    type: integer
                    nullable: true
        '404':
          description: Esecuzione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}:
    get:
      tags:
        - Projects
        - Jobs
      summary: Get un job specifico
      description: |
        Returns the details of a job ETL specifico, including configurations and execution status.
      operationId: getJob
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      responses:
        '200':
          description: Dettagli del job
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDto'
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Projects
        - Jobs
      summary: Update un job
      description: |
        Aggiorna the data of a job esistente, including configurations and metadata.
      operationId: updateJob
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID of the job to update
        schema:
          type: string
          example: "210"
      requestBody:
        required: true
        description: Dati aggiornati del job
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobDto'
      responses:
        '200':
          description: Job aggiornato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobDto'
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Projects
        - Jobs
      summary: Remove a job from a project
      description: |
        Remove a job from a project, eliminando l'associazione.
        
        **Attenzione:** The job stesso non viene eliminato, solo l'associazione al progetto.
      operationId: removeJobFromProject
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job da rimuovere
        schema:
          type: string
          example: "210"
      responses:
        '200':
          description: Job rimosso dal progetto con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:delete` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/{projectName}:
    get:
      tags:
        - Projects
      summary: Get un progetto per nome
      description: |
        Returns the details of a project searching by name.
      operationId: getProjectFromName
      parameters:
      - name: projectName
        in: path
        required: true
        description: Name of the progetto
        schema:
          type: string
          example: "my-project"
      responses:
        '200':
          description: Dettagli del progetto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobProjectDto'
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/schedule:
    get:
      tags:
        - Projects
        - Scheduler
      summary: Get la schedulazione of a project
      description: |
        Returns la configurazione di schedulazione of a project, incluse informazioni
        su quando e come is executed automatically.
      operationId: getProjectSchedule
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      responses:
        '200':
          description: Configurazione di schedulazione
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectScheduleRequest'
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      tags:
        - Projects
        - Scheduler
      summary: Set project schedule
      description: |
        Imposta o aggiorna la schedulazione of a project per esecuzione automatica.
        
        La schedulazione utilizza cron expressions per definire quando eseguire il progetto.
      operationId: setProjectSchedule
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      requestBody:
        required: true
        description: Configurazione di schedulazione
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectScheduleRequest'
      responses:
        '200':
          description: Schedulazione impostata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectScheduleRequest'
        '400':
          description: Invalid configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:write` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/tasks/{taskId}/status:
    get:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Get lo status of a task
      description: |
        Returns lo status attuale of a task, incluse informazioni su esecuzione e progresso.
      operationId: getTaskStatus
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: taskId
        in: path
        required: true
        description: Unique ID del task
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Status del task
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [PENDING, RUNNING, COMPLETED, FAILED]
                  progress:
                    type: number
                    format: float
                    description: Progresso in percentuale (0-100)
        '404':
          description: Progetto, job o task non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/completion:
    post:
      tags:
        - Projects
        - Jobs
        - Webhooks
      summary: Webhook to notify job completion
      description: |
        Endpoint webhook chiamato da Spark jobs per notificare il completamento o il fallimento
        of an execution job.
        
        This endpoint is called automatically by the Spark system when a job terminates
        (con status RUNNING, COMPLETED o FAILED).
      operationId: jobCompletionWebhook
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      requestBody:
        required: true
        description: Dati del webhook di completamento
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JobCompletionWebhookRequest'
      responses:
        '200':
          description: Webhook processato con successo
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Dati del webhook non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/tasks/{taskId}/start:
    post:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Start a task
      description: |
        Avvia l'esecuzione of a task specifico.
        
        Il task must be of type SPARK, AUTONOMOUS_AGENT o BACKGROUND_TASK.
      operationId: startTask
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: taskId
        in: path
        required: true
        description: Unique ID of the task to start
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Task started successfully
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Progetto, job o task non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Task giÃ  running
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:execute` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/tasks/{taskId}/stop:
    post:
      tags:
        - Projects
        - Jobs
        - Tasks
      summary: Stop a task
      description: |
        Ferma l'esecuzione of a task in progress.
        
        **Attenzione:** Questa operazione puÃ² interrompere un task running, causando
        potenziali perdite dthe data o inconsistenza.
      operationId: stopTask
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "210"
      - name: taskId
        in: path
        required: true
        description: Unique ID del task da fermare
        schema:
          type: string
          example: "1"
      responses:
        '200':
          description: Task fermato con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Progetto, job o task non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Task non running
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:execute` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/tasks/{taskId}/metrics:
    get:
      tags:
        - Projects
        - Jobs
        - Tasks
        - Metrics
      summary: Get le metriche of a task
      description: |
        Returns le metriche dettagliate of a task specifico, incluse durata, record processati,
        utilizzo memoria, CPU e altre metriche di performance.
        
        Le metriche vengono estratte dall'executionLog del task e includono informazioni su:
        - Durata dell'esecuzione
        - Record processati e output
        - Utilizzo memoria (driver ed executor)
        - Utilizzo CPU
        - Conteggio errori e warning
        - Dimensione file di output
      operationId: getTaskMetrics
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "220"
      - name: taskId
        in: path
        required: true
        description: Unique ID del task
        schema:
          type: string
          example: "229"
      responses:
        '200':
          description: Metriche del task
          content:
            application/json:
              schema:
                type: object
                properties:
                  taskId:
                    type: integer
                    format: int64
                    description: ID del task
                  durationSeconds:
                    type: integer
                    format: int64
                    description: Durata dell'esecuzione in secondi
                  recordsProcessed:
                    type: integer
                    format: int64
                    description: Numero di record processati
                  recordsOutput:
                    type: integer
                    format: int64
                    description: Numero di record in output
                  outputFileSizeBytes:
                    type: integer
                    format: int64
                    description: Dimensione del file di output in bytes
                  driverMemoryUsedBytes:
                    type: integer
                    format: int64
                    description: Memoria utilizzata dal driver in bytes
                  executorMemoryUsedBytes:
                    type: integer
                    format: int64
                    description: Memoria utilizzata dagli executor in bytes
                  executorCount:
                    type: integer
                    format: int32
                    description: Numero di executor utilizzati
                  totalCpuTimeSeconds:
                    type: integer
                    format: int64
                    description: Tempo totale CPU utilizzato in secondi
                  errorCount:
                    type: integer
                    format: int32
                    description: Numero di errori durante l'esecuzione
                  warningCount:
                    type: integer
                    format: int32
                    description: Numero di warning durante l'esecuzione
                  status:
                    type: string
                    description: Status finale del task
                  startedAt:
                    type: string
                    format: date-time
                    description: Timestamp di inizio esecuzione
                  completedAt:
                    type: string
                    format: date-time
                    description: Timestamp di completamento esecuzione
        '404':
          description: Progetto, job o task non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/jobs/{jobId}/metrics:
    get:
      tags:
        - Projects
        - Jobs
        - Metrics
      summary: Get le metriche aggregate of a job
      description: |
        Returns the aggregated metrics of all executions of a job, including sums, averages
        e conteggi per status.
        
        Le metriche vengono calcolate a livello database per performance ottimali e includono:
        - Numero totale di esecuzioni
        - Durata totale e media
        - Record processati e output totali
        - Utilizzo memoria totale
        - Conteggio esecuzioni per status (COMPLETED, FAILED, RUNNING)
        
        Ã possibile filtrare le metriche per periodo utilizzando i parametri `startTime` e `endTime`.
      operationId: getJobMetrics
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: jobId
        in: path
        required: true
        description: Unique ID del job
        schema:
          type: string
          example: "220"
      - name: startTime
        in: query
        required: false
        description: |
          Timestamp di inizio per filtrare le esecuzioni (formato ISO 8601).
          Esempio: "2025-12-11T00:00:00Z"
        schema:
          type: string
          format: date-time
          example: "2025-12-11T00:00:00Z"
      - name: endTime
        in: query
        required: false
        description: |
          Timestamp di fine per filtrare le esecuzioni (formato ISO 8601).
          Esempio: "2025-12-11T23:59:59Z"
        schema:
          type: string
          format: date-time
          example: "2025-12-11T23:59:59Z"
      responses:
        '200':
          description: Metriche aggregate del job
          content:
            application/json:
              schema:
                type: object
                properties:
                  jobId:
                    type: integer
                    format: int64
                    description: ID del job
                  startTime:
                    type: string
                    format: date-time
                    description: Timestamp di inizio filtro (se specificato)
                  endTime:
                    type: string
                    format: date-time
                    description: Timestamp di fine filtro (se specificato)
                  aggregated:
                    type: object
                    properties:
                      totalExecutions:
                        type: integer
                        format: int64
                        description: Numero totale di esecuzioni
                      totalDurationSeconds:
                        type: integer
                        format: int64
                        description: Durata totale in secondi
                      averageDurationSeconds:
                        type: number
                        format: double
                        description: Durata media in secondi
                      totalRecordsProcessed:
                        type: integer
                        format: int64
                        description: Totale record processati
                      totalRecordsOutput:
                        type: integer
                        format: int64
                        description: Totale record in output
                      totalOutputFileSizeBytes:
                        type: integer
                        format: int64
                        description: Dimensione totale file di output in bytes
                      totalDriverMemoryUsedBytes:
                        type: integer
                        format: int64
                        description: Memoria totale utilizzata dal driver in bytes
                      totalExecutorMemoryUsedBytes:
                        type: integer
                        format: int64
                        description: Memoria totale utilizzata dagli executor in bytes
                      totalCpuTimeSeconds:
                        type: integer
                        format: int64
                        description: Tempo totale CPU utilizzato in secondi
                      totalErrorCount:
                        type: integer
                        format: int64
                        description: Totale errori
                      totalWarningCount:
                        type: integer
                        format: int64
                        description: Totale warning
                      completedCount:
                        type: integer
                        format: int64
                        description: Numero di esecuzioni completate con successo
                      failedCount:
                        type: integer
                        format: int64
                        description: Numero di esecuzioni fallite
                      runningCount:
                        type: integer
                        format: int64
                        description: Numero di esecuzioni in progress
        '404':
          description: Progetto o job non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `jobs:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/id/{projectId}/metrics:
    get:
      tags:
        - Projects
        - Metrics
      summary: Get le metriche aggregate of a project
      description: |
        Returns the aggregated metrics of all executions of all jobs of a project,
        incluse somme, medie e conteggi per status.
        
        Le metriche vengono calcolate a livello database per performance ottimali e includono:
        - Numero totale di esecuzioni per progetto
        - Durata totale e media
        - Record processati e output totali
        - Utilizzo memoria totale
        - Conteggio esecuzioni per status (COMPLETED, FAILED, RUNNING)
        - Raggruppamento per job con metriche per singolo job
        
        Ã possibile filtrare le metriche per periodo utilizzando i parametri `startTime` e `endTime`.
      operationId: getProjectMetrics
      parameters:
      - name: projectId
        in: path
        required: true
        description: Unique ID del progetto
        schema:
          type: string
          example: "98"
      - name: startTime
        in: query
        required: false
        description: |
          Timestamp di inizio per filtrare le esecuzioni (formato ISO 8601).
          Esempio: "2025-12-11T00:00:00Z"
        schema:
          type: string
          format: date-time
          example: "2025-12-11T00:00:00Z"
      - name: endTime
        in: query
        required: false
        description: |
          Timestamp di fine per filtrare le esecuzioni (formato ISO 8601).
          Esempio: "2025-12-11T23:59:59Z"
        schema:
          type: string
          format: date-time
          example: "2025-12-11T23:59:59Z"
      responses:
        '200':
          description: Metriche aggregate del progetto
          content:
            application/json:
              schema:
                type: object
                properties:
                  projectId:
                    type: integer
                    format: int64
                    description: ID del progetto
                  startTime:
                    type: string
                    format: date-time
                    description: Timestamp di inizio filtro (se specificato)
                  endTime:
                    type: string
                    format: date-time
                    description: Timestamp di fine filtro (se specificato)
                  aggregated:
                    type: object
                    properties:
                      totalExecutions:
                        type: integer
                        format: int64
                        description: Numero totale di esecuzioni nel progetto
                      totalDurationSeconds:
                        type: integer
                        format: int64
                        description: Durata totale in secondi
                      averageDurationSeconds:
                        type: number
                        format: double
                        description: Durata media in secondi
                      totalRecordsProcessed:
                        type: integer
                        format: int64
                        description: Totale record processati
                      totalRecordsOutput:
                        type: integer
                        format: int64
                        description: Totale record in output
                      totalOutputFileSizeBytes:
                        type: integer
                        format: int64
                        description: Dimensione totale file di output in bytes
                      totalDriverMemoryUsedBytes:
                        type: integer
                        format: int64
                        description: Memoria totale utilizzata dal driver in bytes
                      totalExecutorMemoryUsedBytes:
                        type: integer
                        format: int64
                        description: Memoria totale utilizzata dagli executor in bytes
                      totalCpuTimeSeconds:
                        type: integer
                        format: int64
                        description: Tempo totale CPU utilizzato in secondi
                      totalErrorCount:
                        type: integer
                        format: int64
                        description: Totale errori
                      totalWarningCount:
                        type: integer
                        format: int64
                        description: Totale warning
                      completedCount:
                        type: integer
                        format: int64
                        description: Numero di esecuzioni completate con successo
                      failedCount:
                        type: integer
                        format: int64
                        description: Numero di esecuzioni fallite
                      runningCount:
                        type: integer
                        format: int64
                        description: Numero di esecuzioni in progress
                  jobs:
                    type: array
                    description: Metriche aggregate per ognthe jobs del progetto
                    items:
                      type: object
                      properties:
                        jobId:
                          type: integer
                          format: int64
                          description: ID del job
                        executionCount:
                          type: integer
                          format: int64
                          description: Numero di esecuzioni del job
                        totalDurationSeconds:
                          type: integer
                          format: int64
                          description: Durata totale del job in secondi
                        totalRecordsProcessed:
                          type: integer
                          format: int64
                          description: Totale record processati dal job
        '404':
          description: Progetto non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato - scope `projects:read` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/admin/tasks/mark-zombies:
    post:
      tags:
        - Projects
        - Admin
        - Tasks
      summary: Mark zombie tasks as FAILED
      description: |
        Detects and marks automatically come FAILED the tasks that are RUNNING but are running
        for longer of the timeout specified (task "zombie").
        
        Un task Ã¨ considerato "zombie" se:
        - Ha status RUNNING
        - Ã running da longer than the timeout specificato (default: 24 hours)
        - Il timestamp di `startedAt` (o `scheduledTime` come fallback) supera il timeout
        
        Quando un task viene marcato come zombie:
        - Lo status viene aggiornato a FAILED
        - L'executionLog viene aggiornato con status FAILED, completedAt e un message di error
        - Viene calcolata la durata totale dell'esecuzione
        
        **Nota:** Questo endpoint richiede privilegi di amministrathours (scope `admin`).
      operationId: markZombieTasks
      parameters:
      - name: timeoutHours
        in: query
        required: false
        description: |
          Timeout in hours per considerare un task come "zombie" (default: 24).
          I task RUNNING for longer di questo value verranno marcati come FAILED.
        schema:
          type: integer
          format: int64
          default: 24
          example: 24
      responses:
        '200':
          description: Task zombie marcati con successo
          content:
            application/json:
              schema:
                type: object
                properties:
                  markedCount:
                    type: integer
                    format: int64
                    description: Numero dthe tasks marcati come FAILED
                  markedTaskIds:
                    type: array
                    description: Lista degli ID dethe tasks marcati come FAILED
                    items:
                      type: integer
                      format: int64
                  timeoutHours:
                    type: integer
                    format: int64
                    description: Timeout utilizzato (in hours)
                  message:
                    type: string
                    description: Messaggio di conferma
                    example: "Marked 5 zombie task(s) as FAILED"
        '401':
          description: Non autorizzato - scope `admin` richiesto
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/projects/test:
    get:
      tags:
        - Projects
      summary: Test endpoint for projects
      description: |
        Endpoint di test per verificare la connettivitÃ  e l'autenticazione delthe API progetti.
      operationId: test_1
      responses:
        '200':
          description: Test completato con successo
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "OK"
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/html/{url}/{protocol}:
    get:
      operationId: getHtml
      parameters:
      - name: protocol
        in: path
        required: true
        schema:
          type: string
      - name: url
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: default response
          content:
            text/html: {}
  /api/strapi-tables/{table}/{id}:
    get:
      operationId: getById
      parameters:
      - name: table
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: default response
          content:
            application/json: {}
    put:
      operationId: update
      parameters:
      - name: table
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        default:
          description: default response
          content:
            application/json: {}
    delete:
      operationId: delete
      parameters:
      - name: table
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: string
      responses:
        default:
          description: default response
          content:
            application/json: {}
  /api/strapi-tables/{table}:
    get:
      operationId: findAll
      parameters:
      - name: table
        in: path
        required: true
        schema:
          type: string
      - name: page
        in: query
        schema:
          type: integer
          format: int32
          default: 0
      - name: pageSize
        in: query
        schema:
          type: integer
          format: int32
          default: 50
      responses:
        default:
          description: default response
          content:
            application/json: {}
    post:
      operationId: insert
      parameters:
      - name: table
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        default:
          description: default response
          content:
            application/json: {}
  /health:
    get:
      operationId: getHealth
      responses:
        default:
          description: default response
          content:
            application/json: {}
  /webrobot/api/python-extensions/python-extensions/{extensionId}:
    put:
      tags:
        - Python Extensions
      summary: Update un'estensione Python
      description: |
        Aggiorna the data of un'estensione Python esistente, including configurations and metadata.
      operationId: updatePythonExtension
      parameters:
      - name: extensionId
        in: path
        required: true
        description: Unique ID dell'estensione
        schema:
          type: string
          example: "my-extension"
      requestBody:
        required: true
        description: Dati aggiornati dell'estensione
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        '200':
          description: Estensione aggiornata con successo
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Estensione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    delete:
      tags:
        - Python Extensions
      summary: Delete un'estensione Python
      description: |
        Deletes a Python extension from the system.
        
        **Attenzione:** Questa operazione Ã¨ irreversibile. Gli agent che utilizzano questa
        estensione potrebbero non funzionare correttamente.
      operationId: deletePythonExtension
      parameters:
      - name: extensionId
        in: path
        required: true
        description: Unique ID of the extension to delete
        schema:
          type: string
          example: "my-extension"
      responses:
        '200':
          description: Estensione eliminata con successo
          content:
            application/json:
              schema:
                type: object
        '404':
          description: Estensione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/python-extensions/{extensionId}/generate-pyspark:
    post:
      tags:
        - Python Extensions
      summary: Generate PySpark code from an extension
      description: |
        Generate PySpark code from an extension Python registrata in the system.
        
        Utile per convertire estensioni Python in codice PySpark utilizzabile nethe jobs Spark.
      operationId: generatePysparkCode
      parameters:
      - name: extensionId
        in: path
        required: true
        description: Unique ID dell'estensione
        schema:
          type: string
          example: "my-extension"
      responses:
        '200':
          description: Codice PySpark generato con successo
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: string
                    description: Codice PySpark generato
        '404':
          description: Estensione non trovata
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/agents/{agentId}/extensions:
    get:
      tags:
        - Python Extensions
        - Agents
      summary: Get le estensioni di un agent
      description: |
        Returns the list of all estensioni Python associate a un agent specifico.
      operationId: getAgentExtensions
      parameters:
      - name: agentId
        in: path
        required: true
        description: Unique ID dell'agent
        schema:
          type: string
          example: "123"
      responses:
        '200':
          description: Lista delle estensioni dell'agent
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '404':
          description: Agent non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/agents/{agentId}/python-extensions:
    get:
      tags:
        - Python Extensions
        - Agents
      summary: Get le estensioni Python di un agent
      description: |
        Returns the list of all estensioni Python associate a un agent specifico.
      operationId: getAgentPythonExtensions
      parameters:
      - name: agentId
        in: path
        required: true
        description: Unique ID dell'agent
        schema:
          type: string
          example: "123"
      responses:
        '200':
          description: Lista delle estensioni Python dell'agent
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
        '404':
          description: Agent non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Python Extensions
        - Agents
      summary: Update le estensioni Python di un agent
      description: |
        Aggiorna the list di estensioni Python associate a un agent specifico.
      operationId: updateAgentPythonExtensions
      parameters:
      - name: agentId
        in: path
        required: true
        description: Unique ID dell'agent
        schema:
          type: string
          example: "123"
      requestBody:
        required: true
        description: Lista di estensioni Python da associare all'agent
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        '200':
          description: Estensioni aggiornate con successo
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Agent non trovato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/info:
    get:
      tags:
        - Python Extensions
      summary: Get informazioni sul plugin Python Extensions
      description: |
        Returns informazioni generali sul plugin Python Extensions, incluse versioni e
        configurazioni.
      operationId: getPluginInfo_1
      responses:
        '200':
          description: Informazioni sul plugin
          content:
            application/json:
              schema:
                type: object
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/supported-types:
    get:
      tags:
        - Python Extensions
      summary: Get i tipi di estensione supportati
      description: |
        Returns the list of all tipi di estensione Python supportati from the system.
      operationId: getSupportedExtensionTypes
      responses:
        '200':
          description: Lista dei tipi supportati
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/process-yaml:
    post:
      tags:
        - Python Extensions
      summary: Processa estensioni Python da YAML
      description: |
        Processa e registra estensioni Python da una definizione YAML.
        
        Utile per importare estensioni da file di configurazione.
      operationId: processYamlExtensions
      requestBody:
        required: true
        description: Definizione YAML delle estensioni
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        '200':
          description: Estensioni processate con successo
          content:
            application/json:
              schema:
                type: object
        '400':
          description: YAML non valido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/python-extensions/register:
    post:
      tags:
        - Python Extensions
      summary: Registra una nuova estensione Python
      description: |
        Registra una nuova estensione Python in the system.
        
        L'estensione can be utilizzata dagli agent per estendere le funzionalitÃ  dethe jobs Spark.
      operationId: registerPythonExtension
      requestBody:
        required: true
        description: Dati dell'estensione da registrare
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        '201':
          description: Estensione registrata con successo
          content:
            application/json:
              schema:
                type: object
        '400':
          description: Dati non validi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /webrobot/api/python-extensions/validate:
    post:
      tags:
        - Python Extensions
      summary: Valida un'estensione Python
      description: |
        Valida la struttura e la sintassi di un'estensione Python senza registrarla in the system.
        
        Utile per verificare la correttezza di un'estensione prima della registrazione.
      operationId: validatePythonExtension
      requestBody:
        required: true
        description: Dati dell'estensione da validare
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: object
      responses:
        '200':
          description: Estensione valida
          content:
            application/json:
              schema:
                type: object
                properties:
                  valid:
                    type: boolean
                    example: true
                  errors:
                    type: array
                    items:
                      type: string
                    description: Lista di errori di validazione (se presenti)
        '400':
          description: Estensione non valida
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Non autorizzato
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: |
        API Key per l'autenticazione. Formato: `{organization}:{key}`
        
        Esempio: `super-admin-dev:W3bR0b0t-Sup3r-4dm1n-D3v-K3y-2024-S3cur3!`
  schemas:
    Error:
      type: object
      properties:
        error:
          type: string
          description: Messaggio di error descrittivo
          example: "Job not found or invalid configuration"
        code:
          type: integer
          description: Codice di status HTTP
          example: 400
        timestamp:
          type: string
          format: date-time
          description: Timestamp dell'error
          example: "2025-12-10T23:15:30Z"
    CronJobRequest:
      type: object
      properties:
        name:
          type: string
        namespace:
          type: string
        schedule:
          type: string
        webhookUrl:
          type: string
        jobId:
          type: string
        projectId:
          type: string
        clusterProvider:
          type: string
        clusterConfigId:
          type: string
        secretName:
          type: string
        secretKey:
          type: string
        image:
          type: string
    BodyPart:
      type: object
      properties:
        contentDisposition:
          $ref: '#/components/schemas/ContentDisposition'
        entity:
          type: object
        headers:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        mediaType:
          type: object
          properties:
            type:
              type: string
            subtype:
              type: string
            parameters:
              type: object
              additionalProperties:
                type: string
            wildcardType:
              type: boolean
            wildcardSubtype:
              type: boolean
        messageBodyWorkers:
          $ref: '#/components/schemas/MessageBodyWorkers'
        parent:
          $ref: '#/components/schemas/MultiPart'
        providers:
          type: object
        parameterizedHeaders:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/ParameterizedHeader'
    ContentDisposition:
      type: object
      properties:
        type:
          type: string
        parameters:
          type: object
          additionalProperties:
            type: string
        fileName:
          type: string
        creationDate:
          type: string
          format: date-time
        modificationDate:
          type: string
          format: date-time
        readDate:
          type: string
          format: date-time
        size:
          type: integer
          format: int64
    FormDataBodyPart:
      type: object
      properties:
        contentDisposition:
          $ref: '#/components/schemas/ContentDisposition'
        entity:
          type: object
        headers:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        mediaType:
          type: object
          properties:
            type:
              type: string
            subtype:
              type: string
            parameters:
              type: object
              additionalProperties:
                type: string
            wildcardType:
              type: boolean
            wildcardSubtype:
              type: boolean
        messageBodyWorkers:
          $ref: '#/components/schemas/MessageBodyWorkers'
        parent:
          $ref: '#/components/schemas/MultiPart'
        providers:
          type: object
        name:
          type: string
        value:
          type: string
        formDataContentDisposition:
          $ref: '#/components/schemas/FormDataContentDisposition'
        simple:
          type: boolean
        parameterizedHeaders:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/ParameterizedHeader'
    FormDataContentDisposition:
      type: object
      properties:
        type:
          type: string
        parameters:
          type: object
          additionalProperties:
            type: string
        fileName:
          type: string
        creationDate:
          type: string
          format: date-time
        modificationDate:
          type: string
          format: date-time
        readDate:
          type: string
          format: date-time
        size:
          type: integer
          format: int64
        name:
          type: string
    FormDataMultiPart:
      type: object
      properties:
        contentDisposition:
          $ref: '#/components/schemas/ContentDisposition'
        entity:
          type: object
        headers:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        mediaType:
          type: object
          properties:
            type:
              type: string
            subtype:
              type: string
            parameters:
              type: object
              additionalProperties:
                type: string
            wildcardType:
              type: boolean
            wildcardSubtype:
              type: boolean
        messageBodyWorkers:
          $ref: '#/components/schemas/MessageBodyWorkers'
        parent:
          $ref: '#/components/schemas/MultiPart'
        providers:
          type: object
        bodyParts:
          type: array
          items:
            $ref: '#/components/schemas/BodyPart'
        fields:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/FormDataBodyPart'
        parameterizedHeaders:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/ParameterizedHeader'
    MessageBodyWorkers:
      type: object
    MultiPart:
      type: object
      properties:
        contentDisposition:
          $ref: '#/components/schemas/ContentDisposition'
        entity:
          type: object
        headers:
          type: object
          additionalProperties:
            type: array
            items:
              type: string
        mediaType:
          type: object
          properties:
            type:
              type: string
            subtype:
              type: string
            parameters:
              type: object
              additionalProperties:
                type: string
            wildcardType:
              type: boolean
            wildcardSubtype:
              type: boolean
        messageBodyWorkers:
          $ref: '#/components/schemas/MessageBodyWorkers'
        parent:
          $ref: '#/components/schemas/MultiPart'
        providers:
          type: object
        bodyParts:
          type: array
          items:
            $ref: '#/components/schemas/BodyPart'
        parameterizedHeaders:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: '#/components/schemas/ParameterizedHeader'
    ParameterizedHeader:
      type: object
      properties:
        value:
          type: string
        parameters:
          type: object
          additionalProperties:
            type: string
    TrainingRequestBean:
      type: object
      properties:
        model:
          type: string
        trainingFile:
          type: string
        validationFile:
          type: string
        datasetId:
          type: string
        hyperparameters:
          type: object
          additionalProperties:
            type: object
    ModelPublishRequest:
      type: object
      properties:
        localModelPath:
          type: string
        modelName:
          type: string
        description:
          type: string
    DatasetUploadRequest:
      type: object
      properties:
        localPath:
          type: string
        format:
          type: string
        description:
          type: string
    AgentDto:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        enabled:
          type: boolean
        apiEndpoint:
          type: string
        executionMode:
          type: string
          enum:
          - MANUAL
          - SCHEDULED
          - EVENT_DRIVEN
        categoryId:
          type: string
        type:
          type: string
          enum:
          - SCRAPING_AGENT
          - LEADGEN_AGENT
          - TRADING_AGENT
          - DATA_ANALYTICS_AGENT
          - REPORTING_AGENT
          - ML_AGENT
        role:
          type: string
        backstory:
          type: string
        defaultPrompt:
          type: string
        prompts:
          type: string
        config:
          type: string
        code:
          type: string
        codeTypeId:
          type: string
        pysparkCode:
          type: string
        pythonExtensions:
          type: string
        generatedAt:
          type: string
          format: date-time
        toolIds:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    JobCategoryDto:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        icon:
          type: string
        visibility:
          type: string
          enum:
          - PUBLIC
          - PRIVATE
        enabled:
          type: boolean
        agentIds:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    CloudCredential:
      type: object
      properties:
        id:
          type: integer
          format: int32
        name:
          type: string
        description:
          type: string
        provider:
          type: string
          enum:
          - OPENAI
          - ANTHROPIC
          - HUGGING_FACE
          - COHERE
          - AZURE_AI_STUDIO
          - MOSAICML
          - REPLIC
          - STEEL_DEV
          - TOGETHERAI
          - AWS
          - AZURE
          - GCP
          - AWS_BEDROCK
          - GOOGLE_VERTEX
          - DATABRICKS
          - TWITTER
          - REDDIT
          - FACEBOOK
          - INSTAGRAM
          - LINKEDIN
          - TIKTOK
          - YOUTUBE
          - ALPHAVANTAGE
          - POLYGON
          - TWELVEDATA
          - MARKETSTACK
          - FMP
          - IEXCLOUD
          - CBOND
          - GOOGLE_SEARCH
          - BING_SEARCH
        apiKey:
          type: string
        apiSecret:
          type: string
        organizationId:
          type: string
        projectId:
          type: string
        region:
          type: string
        endpoint:
          type: string
        accessKeyId:
          type: string
        secretAccessKey:
          type: string
        sessionToken:
          type: string
        accountId:
          type: string
        subscriptionId:
          type: string
        resourceGroup:
          type: string
        workspaceName:
          type: string
        huggingFaceToken:
          type: string
        cohereApiKey:
          type: string
        azureAiStudioEndpoint:
          type: string
        mosaicmlApiKey:
          type: string
        replicateApiToken:
          type: string
        twitterBearerToken:
          type: string
        twitterApiKey:
          type: string
        twitterApiSecret:
          type: string
        redditClientId:
          type: string
        redditClientSecret:
          type: string
        redditUserAgent:
          type: string
        facebookAccessToken:
          type: string
        facebookAppId:
          type: string
        facebookAppSecret:
          type: string
        instagramAccessToken:
          type: string
        linkedinAccessToken:
          type: string
        linkedinClientId:
          type: string
        linkedinClientSecret:
          type: string
        tiktokClientKey:
          type: string
        tiktokClientSecret:
          type: string
        youtubeApiKey:
          type: string
        databricksWorkspaceUrl:
          type: string
        databricksAccessToken:
          type: string
        databricksClusterId:
          type: string
        oauthAccessToken:
          type: string
        oauthRefreshToken:
          type: string
        oauthTokenExpiresAt:
          type: string
          format: date-time
        oauthTokenType:
          type: string
        alphavantageApiKey:
          type: string
        polygonApiKey:
          type: string
        twelvedataApiKey:
          type: string
        marketstackAccessKey:
          type: string
        fmpApiKey:
          type: string
        iexcloudToken:
          type: string
        cbondApiKey:
          type: string
        cbondClientId:
          type: string
        cbondClientSecret:
          type: string
        googleSearchApiKey:
          type: string
        googleSearchEngineId:
          type: string
        bingSearchApiKey:
          type: string
        enabled:
          type: boolean
    TimePeriod:
      type: object
      properties:
        startTimePeriod:
          type: string
        endTimePeriod:
          type: string
    DatasetUploadApiDto:
      type: object
      properties:
        name:
          type: string
        version:
          type: string
        comments:
          type: string
        attachmentName:
          type: string
        headerline:
          type: string
    DatasetDto:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        userId:
          type: string
        sourceUrl:
          type: string
        sourceType:
          type: string
        filePath:
          type: string
        fileFormat:
          type: string
        fileSize:
          type: integer
          format: int64
        schema:
          type: string
        metadata:
          type: string
        enabled:
          type: boolean
        fieldIds:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        storagePath:
          type: string
        format:
          type: string
        datasetType:
          type: string
        trinoSchema:
          type: string
    PrestoQueryRequest:
      type: object
      properties:
        sql:
          type: string
        catalog:
          type: string
        schema:
          type: string
        limit:
          type: integer
          format: int32
        offset:
          type: integer
          format: int32
    EtlLibraryVersionApiDto:
      type: object
      properties:
        id:
          type: integer
          format: int64
        buildType:
          type: string
        buildNumber:
          type: integer
          format: int32
        version:
          type: string
        jarPath:
          type: string
        jarPathObfuscated:
          type: string
        jarSizeBytes:
          type: integer
          format: int64
        uploadedAt:
          type: string
          format: date-time
        active:
          type: boolean
        description:
          type: string
    PluginInstallation:
      type: object
      properties:
        id:
          type: integer
          format: int64
        pluginId:
          type: string
        pluginType:
          type: string
        buildType:
          type: string
        buildNumber:
          type: integer
          format: int32
        version:
          type: string
        jarPath:
          type: string
        manifestPath:
          type: string
        enabled:
          type: boolean
        organizationId:
          type: string
        organizationIdsJson:
          type: string
        mainClass:
          type: string
        description:
          type: string
        installedAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        enabledAt:
          type: string
          format: date-time
        enabledBy:
          type: string
        installedBy:
          type: string
    JobDto:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        projectId:
          type: string
        agentId:
          type: string
        inputDatasetId:
          type: string
        cloudCredentialId:
          type: string
        cloudCredentialIds:
          type: array
          items:
            type: string
        executionStatus:
          type: string
          enum:
          - PENDING
          - RUNNING
          - COMPLETED
          - FAILED
        scheduledTime:
          type: string
          format: date-time
        enabled:
          type: boolean
        taskIds:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    JobProjectDto:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        cronSchedule:
          type: string
        enabled:
          type: boolean
        jobIds:
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    TaskDto:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        jobId:
          type: string
        botId:
          type: string
        outputDatasetId:
          type: string
        taskType:
          type: string
          enum:
          - SPARK
          - AUTONOMOUS_AGENT
          - BACKGROUND_TASK
        executionReferenceId:
          type: string
        executionStatus:
          type: string
          enum:
          - PENDING
          - RUNNING
          - COMPLETED
          - FAILED
        executionLog:
          type: string
        scheduledTime:
          type: string
          format: date-time
        executionMode:
          type: string
          enum:
          - MANUAL
          - SCHEDULED
          - EVENT_DRIVEN
        enabled:
          type: boolean
        apiKey:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    JobCompletionWebhookRequest:
      type: object
      properties:
        jobId:
          type: string
        executionId:
          type: string
        sparkApplicationName:
          type: string
        status:
          type: string
        outputDatasetPath:
          type: string
        outputDatasetFormat:
          type: string
        outputDatasetSchema:
          type: string
        durationSeconds:
          type: integer
          format: int64
        recordsProcessed:
          type: integer
          format: int64
        recordsOutput:
          type: integer
          format: int64
        outputFileSizeBytes:
          type: integer
          format: int64
        partitionsCount:
          type: integer
          format: int32
        driverMemoryUsedBytes:
          type: integer
          format: int64
        executorMemoryUsedBytes:
          type: integer
          format: int64
        executorCount:
          type: integer
          format: int32
        totalCpuTimeSeconds:
          type: integer
          format: int64
        errorCount:
          type: integer
          format: int32
        warningCount:
          type: integer
          format: int32
        errorMessage:
          type: string
        additionalMetrics:
          type: object
          additionalProperties:
            type: object
          writeOnly: true
        startedAt:
          type: string
        completedAt:
          type: string
        sparkUiUrl:
          type: string
        metrics:
          type: object
          additionalProperties:
            type: object
          writeOnly: true
    ProjectScheduleRequest:
      type: object
      properties:
        cronSchedule:
          type: string
        enabled:
          type: boolean
        timezone:
          type: string
